    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#0276f6">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <title>Hello world with Autotools | Czarnota</title>

        <meta name="generator" content="blog.sh" />
        <meta property="og:title" content="Hello world with Autotools" />
        <meta property="og:locale" content="en_US" />

        <meta name="description" content="Interesting things about software engineering" />
        <meta property="og:description" content="Interesting things about software engineering" />

        <link rel="canonical" href="http://czarnota.io/2019/02/10/hello-world-with-autotools.html" />
        <meta property="og:url" content="http://czarnota.io/2019/02/10/hello-world-with-autotools.html" />

        <meta property="og:site_name" content="Czarnota" />
        <link rel="next" href="http://czarnota.io/page/2/index.html" />
        <script type="application/ld+json">
        {"@type":"WebSite","url":"http://czarnota.io/","headline":"Czarnota","description":"Interesting things about software engineering","name":"Czarnota","@context":"http://schema.org"}</script>
          <link rel="stylesheet" href="/assets/main.css">
         <link rel="icon" type="image/png" href="/assets/favicon.ico">
      </head>
      <body>
        <div class="content">
            <main aria-label="Content">
                    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
            <div class="post post-full">
          <div class="wrapper post-img-wrapper">
          <div class="post-header-wrapper">
            <header class="post-header">

            <h1 class="post-h">

            <a class="post-link" href="/2019/02/10/hello-world-with-autotools.html">Hello world with Autotools</a>

            </h1>

            <div class="post-meta">
                <span>2019/02/10</span>
                <span class="post-tags">
                <a class=post-tag href=#>c</a>
                </span>
            </div>

            </header>
          </div>
        </div>


        <div class="wrapper">

        <div class="post-content"><p><em><a href="https://en.wikipedia.org/wiki/GNU_Build_System">The Autotools</a></em> are de facto standard for building C/C++ code in the Linux world. It is a very flexible build system, but because of its flexibility it has a quite steep learning curve. Here is the bare minimum example that will get you started.</p>
<h2 id="the-bare-minimum">The bare minimum</h2>
<p>To build a simple hello world program with <a href="https://en.wikipedia.org/wiki/GNU_Build_System">Autotools</a> you just need 3 files. Here is the file structure:</p>
<pre><code>bare-minimum-example
├── Makefile.am
├── configure.ac
└── main.c</code></pre>
<p>The <code>configure</code> will be created from <code>configure.ac</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1"><span class="co">#configure.ac</span></a>
<a class="sourceLine" id="cb2-2" title="2">AC_INIT([hello<span class="op">-</span>world], <span class="fl">1.0</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">AM_INIT_AUTOMAKE([foreign])</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">AC_PROG_CC</a>
<a class="sourceLine" id="cb2-6" title="6">AC_CONFIG_FILES([Makefile])</a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8">AC_OUTPUT</a></code></pre></div>
<p>And a <code>Makefile.am</code> to generate a <code>Makefile.in</code> from which the final <code>Makefile</code> will be created.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="co">#Makefile.am</span></a>
<a class="sourceLine" id="cb3-2" title="2">bin_PROGRAMS <span class="op">=</span> hello</a>
<a class="sourceLine" id="cb3-3" title="3">hello_SOURCES <span class="op">=</span> hello.c</a></code></pre></div>
<p>Contents of <code>hello.c</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb4-1" title="1"><span class="co">//hello.c</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> **argv)</a>
<a class="sourceLine" id="cb4-5" title="5">{</a>
<a class="sourceLine" id="cb4-6" title="6">    printf(<span class="st">&quot;Hello world!</span><span class="sc">\n</span><span class="st">&quot;</span>);</a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="cf">return</span> <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb4-8" title="8">}</a></code></pre></div>
<h2 id="building">Building</h2>
<p>First you need to transform your <code>configure.ac</code> into a <code>configure</code> script. This is done by the <code>autoconf</code>. The <code>configure</code> script uses a <code>Makefile.in</code> to produce the final <code>Makefile</code>. The <code>Makefile.in</code> is usually generated by the <code>automake</code> from a <code>Makefile.am</code>. Are you still with me?</p>
<pre><code>configure.ac -&gt; |autoconf| -&gt;  configure  -&gt; |           |
                                             |./configure| -&gt; Makefile
 Makefile.am -&gt; |automake| -&gt; Makefile.in -&gt; |           |</code></pre>
<p>You can use <code>autoreconf</code> to run <code>autoconf</code> and <code>automake</code> for you.</p>
<pre class="console"><code>$ autoreconf -vfi</code></pre>
<p>Then you can run the produced <code>./configure</code> script and build you application.</p>
<pre class="console"><code>$ ./configure
$ make
$ ./hello
Hello world!</code></pre>
<p>And that’s pretty much it.</p>
<h2 id="next-steps">Next steps</h2>
<p>This example is everything you need to know in order to build a simple program with <a href="https://en.wikipedia.org/wiki/GNU_Build_System">Autotools</a> . If your scenario is more complex, then with the help of the official <a href="https://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html">documentation</a> you will be able extend it.</p></div>

        <div class="navigation">
            <div>
                <div class="prev-post">
                <div>Next post</div>
<a href=/2019/02/12/implementing-dynamic-array-in-one-line-of-code.html>Implementing a dynamic array in a single line of code</a>
                </div>
                <div class="next-post">
                <div>Previous post</div>
<a href=/2018/07/12/building-livereload-with-bash.html>Building a LiveReload with bash</a>
                </div>
                <div class="cf"></div>
            </div>

            <div class="all-posts-link">
                <a href="/">[see all posts]</a>
            </div>
        </div>
        </div>
    </div>
        <a class="u-url" href="//2019/02/10/hello-world-with-autotools.html" hidden></a>
    </article>
            </main>

            <footer>
                <div class="copyright">
                    uncopyright :: <a href="/about/" class="about-link">about</a>
                </div>
            </footer>
        </div>

      </body>

    </html>
